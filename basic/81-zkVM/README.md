## 什么是 zkVM ？

虚拟机（VM）是运行程序的程序。zkVM是一种虚拟机技术，它专门设计用来创建零知识证明。这种技术能够为任何程序或计算过程提供一个通用的框架，从而生成证明，证明这些程序或计算是按照预定的方式正确执行的，而无需透露任何关于执行过程的具体信息。

zkVM不要求学习复杂的数学和密码学来设计和编码ZK，让任何开发人员都可以执行用他们喜欢的语言编写的程序并生成ZKP（零知识证明），从而更容易与零知识证明集成和交互。从广义上讲，大多数zkVM都意味着包括附加到执行程序的虚拟机的编译器工具链和证明系统，而不仅仅是虚拟机本身。

## zkVM 运行流程

### 1. 编译阶段（Compiler Stage）：

程序使用传统编程语言（如C、C++、Rust、Solidity）编写，然后被编译器编译成特定指令集架构（ISA）的机器码。

RISC0/SP1 使用 RUST 来编写，编译器将RUST 程序编译成RISC-V指令集, 生成 RISC-V ELF 文件。

### 2. 虚拟机阶段（VM Stage）：

虚拟机（VM）执行机器码，并生成执行跟踪，这是程序执行的一系列步骤。
执行跟踪的格式由选择的算术化方案和多项式约束集预定。

### 3. 证明者阶段（Prover Stage）：

Prover 使用某种ZKP证明系统（例如 zkSTARK）生成执行证明，来证明任意 RISC-V 程序执行的正确执行。

### 4. 验证者阶段（Verifier Stage）：

Verifier 通过遵循证明系统的验证协议来检查证明, 根据证明的有效性接受或拒绝结果。


## zkVM 与区块链集成

1. 使用 zkVM 链下生成 SNARK proof。
2. 编写智能合约方法验证 proof， 如果 proof 验证成功，继续执行合约逻辑。
3. 发起交易，调用智能合约方法验证 proof 。


## zkVM 项目
本 task 将介绍两个 zkVM 项目
* [RISC Zero](risczero)
* [SP1](sp1)

## zkVM 使用场景
一些使用场景举例
1. ZK 协处理器: 使区块链应用程序能够通过将应用程序逻辑的昂贵部分移至链外来降低 Gas 成本

2. Rollup: 使用 ZKP 有效性证明或 ZK 欺诈证明构建rollups。
3. 可验证的 ETH 区块： 例如基于 RISC0 的 [Zeth](https://github.com/risc0/zeth)